<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HostBuddy</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="branding">
        <img class="app-icon" src="../../assets/default-app.png" alt="HostBuddy icon" />
        <div>
          <h1>HostBuddy</h1>
          <p class="subtitle">Run, manage & share simple AI-made apps safely on your computer</p>
        </div>
      </div>
      <div style="display:flex; gap:10px; align-items:center;">
        <button id="btnFeedback" class="btn">Feedback</button>
        <button id="btnGettingStarted" class="btn" style="background:#0b1022;border-color:#2c3657;">Getting Started</button>
        <button id="btnImport" class="btn">Import</button>
        <button id="btnToggleEdit" class="btn" title="Toggle edit controls" aria-label="Toggle edit controls">Edit</button>
        <button id="btnNew" class="primary">New Project</button>
      </div>
    </header>

    <main class="content">
      <aside id="foldersSidebar" class="sidebar" aria-label="Folders">
        <div class="sidebar-header">
          <h3>Folders</h3>
          <button id="btnAddFolder" class="btn" title="Add Folder" aria-label="Add Folder"></button>
        </div>
        <nav id="foldersList" class="folders"></nav>
      </aside>
      <section class="main">
        <div id="projectsGrid" class="grid"></div>
        <div id="emptyState" class="empty hidden">
          <h2>No projects yet</h2>
          <p>Create your first project to get started.</p>
          <button id="btnNew2" class="primary">Create Project</button>
          <div style="margin-top:10px">
            <button id="btnImport2" class="btn">Import Existing</button>
          </div>
        </div>
      </section>
    </main>

    <!-- Global loading overlay -->
    <div id="loadingOverlay" class="overlay hidden" aria-hidden="true">
      <div class="overlay-content">
        <div class="spinner" aria-hidden="true"></div>
        <div class="msg" role="status">Loading‚Ä¶</div>
      </div>
    </div>

    <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Create Project</h2>
          <p class="modal-subtitle">Follow the steps to set up your project</p>
        </div>
        <form id="projectForm">
          <div class="modal-body">
            <div class="form-steps">
              <div class="step">
                <div class="step-header">
                  <div class="step-num">1</div>
                  <div class="step-title">Name your project</div>
                </div>
                <div class="step-body">
                  <label>Project title
                    <input id="title" type="text" placeholder="My Project" required />
                  </label>
                  <div class="hint">This name appears on your project card.</div>
                </div>
              </div>

              <div class="step">
                <div class="step-header">
                  <div class="step-num">2</div>
                  <div class="step-title">Add a short description</div>
                </div>
                <div class="step-body">
                  <label>Short description
                    <textarea id="description" placeholder="What does it do?"></textarea>
                  </label>
                </div>
              </div>

              <div class="step">
                <div class="step-header">
                  <div class="step-num">3</div>
                  <div class="step-title">Choose a picture (optional)</div>
                </div>
                <div class="step-body">
                  <label>Project picture
                    <input id="icon" type="file" accept="image/*" />
                  </label>
                  <div class="hint">Leave blank to keep the current picture when editing.</div>
                </div>
              </div>

              <div class="step">
                <div class="step-header">
                  <div class="step-num">4</div>
                  <div class="step-title">Attach files (optional)</div>
                </div>
                <div class="step-body">
                  <label>Attach images, CSS, or JS files
                    <input id="attachments" type="file" accept="image/*,.css,.js" multiple />
                  </label>
                  <div class="hint">These files will be embedded in your project and converted to data URIs at runtime.</div>
                  <div id="attachmentsList" class="attachments-list"></div>
                </div>
              </div>

              <div class="step">
                <div class="step-header">
                  <div class="step-num">5</div>
                  <div class="step-title">Set dependency mode</div>
                </div>
                <div class="step-body">
                  <label class="checkbox-row">
                    <input id="offline" type="checkbox" />
                    <span>Offline use ‚Äî install dependencies persistently so it can run without internet.</span>
                  </label>
                </div>
              </div>

              <div class="step">
                <div class="step-header">
                  <div class="step-num">6</div>
                  <div class="step-title">Paste your code</div>
                </div>
                <div class="step-body">
                  <div class="code-actions" style="margin-bottom: 10px;">
                    <button type="button" id="btnPasteCode" class="btn-code-action">Paste from Clipboard</button>
                    <button type="button" id="btnClearCode" class="btn-code-action">Clear Code</button>
                  </div>
                  <label>HTML or single React component (required)
                    <div class="code-editor-container">
                      <div class="line-numbers" id="lineNumbers"></div>
                      <textarea id="code" class="code" placeholder="Paste HTML or a React component (default export) here" required></textarea>
                    </div>
                  </label>
                  <div class="hint">For React, export a default component. For HTML, include any inline CSS/JS as needed.</div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="actions">
              <button type="button" id="btnCancel">Cancel</button>
              <button type="submit" class="primary">Save</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div id="gsModal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <div class="modal-header" style="position: relative;">
          <h2>Getting Started with HostBuddy</h2>
          <p class="modal-subtitle">Turn AI-generated code into real apps on your computer</p>
          <div id="versionBadge" class="version-badge">v0.0.0</div>
        </div>
        <div class="modal-body">
          <!-- Overview Section -->
          <div class="gs-overview">
            <p class="gs-overview-text">
              HostBuddy is your safe playground for AI-created applications. Copy code from ChatGPT, Claude, or any AI assistant, 
              paste it here, and run it instantly. No coding knowledge required!
            </p>
          </div>

          <!-- Tab Navigation -->
          <div class="gs-tabs">
            <button class="gs-tab active" data-tab="quickstart">Quick Start</button>
            <button class="gs-tab" data-tab="features">Features</button>
            <button class="gs-tab" data-tab="ai-setup">AI Setup</button>
          </div>

          <!-- Quick Start Tab -->
          <div class="gs-tab-content active" data-content="quickstart">
            <h3 class="gs-section-title">Create Your First App in 3 Steps</h3>
            
            <div class="gs-workflow">
              <div class="gs-workflow-step">
                <div class="gs-workflow-icon">1</div>
                <div class="gs-workflow-content">
                  <h4>Get Code from AI</h4>
                  <p>Ask ChatGPT, Claude, or Gemini to create an app for you. Copy the code they generate.</p>
                  <div class="gs-tip">üí° Check the "AI Setup" tab for the best prompt to use!</div>
                </div>
              </div>

              <div class="gs-workflow-arrow">‚Üì</div>

              <div class="gs-workflow-step">
                <div class="gs-workflow-icon">2</div>
                <div class="gs-workflow-content">
                  <h4>Create Project</h4>
                  <p>Click <strong>"New Project"</strong> ‚Üí Name your app ‚Üí Paste the code in Step 6 ‚Üí Click <strong>"Save"</strong></p>
                  <div class="gs-tip">üìù Optional: Add a description, icon, or attach image/CSS/JS files</div>
                </div>
              </div>

              <div class="gs-workflow-arrow">‚Üì</div>

              <div class="gs-workflow-step">
                <div class="gs-workflow-icon">3</div>
                <div class="gs-workflow-content">
                  <h4>Run & Enjoy</h4>
                  <p>Click the <strong>"Run"</strong> button on your project card. Your app opens in a new window!</p>
                  <div class="gs-tip">üéâ That's it! Edit anytime by clicking the Edit button.</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Features Tab -->
          <div class="gs-tab-content" data-content="features">
            <h3 class="gs-section-title">Powerful Features</h3>
            
            <div class="gs-feature-grid">
              <div class="gs-feature-card">
                <div class="gs-feature-icon">üìÅ</div>
                <h4>Organize with Folders</h4>
                <p>Create folders and drag-drop apps to organize your library.</p>
                <ul class="gs-feature-list">
                  <li>Click <strong>+</strong> in sidebar to create folders</li>
                  <li>Drag apps onto folders to organize</li>
                  <li>Use Edit mode to rename/delete</li>
                </ul>
              </div>

              <div class="gs-feature-card">
                <div class="gs-feature-icon">üîÑ</div>
                <h4>Share & Import</h4>
                <p>Export apps as .hbproj files to share with others or back up.</p>
                <ul class="gs-feature-list">
                  <li>Click Export on any project card</li>
                  <li>Share the .hbproj file with anyone</li>
                  <li>Import apps others have created</li>
                </ul>
              </div>

              <div class="gs-feature-card">
                <div class="gs-feature-icon">‚úàÔ∏è</div>
                <h4>Offline Mode</h4>
                <p>Download dependencies once for apps that work without internet.</p>
                <ul class="gs-feature-list">
                  <li><strong>Normal:</strong> Downloads each time (requires internet)</li>
                  <li><strong>Offline:</strong> Downloads once, runs anywhere</li>
                </ul>
              </div>

              <div class="gs-feature-card">
                <div class="gs-feature-icon">üîí</div>
                <h4>Secure & Private</h4>
                <p>Everything stays on your computer. No cloud, no tracking.</p>
                <ul class="gs-feature-list">
                  <li>All data stored locally</li>
                  <li>No internet required (except for dependencies)</li>
                  <li>Full control over your apps</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- AI Setup Tab -->
          <div class="gs-tab-content" data-content="ai-setup">
            <h3 class="gs-section-title">AI Context Template</h3>
            <p class="gs-ai-instructions">
              <strong>Copy this template and paste it into your AI chat</strong> before requesting an app. 
              This teaches the AI about HostBuddy's capabilities and ensures compatible code.
            </p>
            
            <div class="gs-code-container">
              <textarea id="promptTemplate" class="code gs-ai-template" readonly>I'm using HostBuddy, a local desktop application that runs AI-generated apps securely on my computer. When I ask you to create an app, please follow these requirements:

## HOSTBUDDY OVERVIEW
HostBuddy is an Electron-based desktop app that:
- Runs HTML and React applications locally on the user's computer
- Stores projects in a local JSON database
- Supports exporting projects as .hbproj files for sharing
- Supports importing .hbproj files from others
- Can attach image/CSS/JS files to projects (stored as base64)
- Preprocesses HTML at runtime to convert file references to data URIs
- Auto-installs safe npm packages for React apps (with security restrictions)

## OUTPUT FORMAT REQUIREMENTS
You must provide code in ONE of these formats:

**Option 1: HTML (for simple apps)**
- A complete, self-contained HTML document or snippet
- Include all CSS in <style> tags and JavaScript in <script> tags
- No external file references except for attached files (see below)

**Option 2: React (for interactive apps)**
- A single .tsx or .jsx file with a default export
- Format: `export default function App() { return (...) }`
- HostBuddy will bundle this at runtime using esbuild
- You can import from npm packages (see Allowed Libraries below)

## FILE ATTACHMENTS & REFERENCES
- Users can attach image, CSS, or JS files separately in HostBuddy
- Reference attached files simply by filename: `<img src="logo.png">` or `<link href="styles.css">`
- HostBuddy automatically converts these to data: URIs at runtime
- Do NOT use external URLs or CDN links - all assets must be attached or inline

## ARCHITECTURE CONSTRAINTS
**MUST BE CLIENT-SIDE ONLY:**
- No backend servers, no API endpoints, no server-side code
- No database connections (use localStorage or IndexedDB instead)
- No environment variables or secrets
- No file system access beyond browser storage
- All functionality must work offline after initial load

**DATA PERSISTENCE:**
- Use localStorage for simple key-value storage
- Use IndexedDB for more complex data
- Design for local-only data - no cloud sync

**EXPORT/IMPORT FUNCTIONALITY:**
- Apps may be exported as .hbproj files and shared with others
- Users can import .hbproj files to add new apps to their library
- Design apps to be portable and self-contained

## ALLOWED LIBRARIES (React apps only)
**Pre-installed UI Components:**
- Import from `@/components/ui/*` for these components:
  - Button, Card, CardHeader, CardContent, CardTitle
  - Input, Textarea, Label
  - Tabs, TabsList, TabsTrigger, TabsContent
  - Switch
- These use Tailwind-style classes via Twind (runtime CSS-in-JS)

**Recommended npm packages:**
- react, react-dom (v18+)
- lucide-react (icons)
- recharts (charts/graphs)
- Small, client-side-only libraries are generally safe

**Package restrictions:**
- Packages are auto-installed with `--ignore-scripts` and size caps
- Server-side packages (Express, Next.js, etc.) will NOT work
- Large packages may be rejected
- Only client-side browser packages are supported

## STYLING
- For HTML: Use inline styles or <style> tags
- For React: Tailwind classes work via Twind runtime (no config needed)
- Modern, clean UI is preferred
- Dark mode friendly when possible

## EXAMPLE REQUEST & RESPONSE

**User Request:**
"Create a pomodoro timer app with start/pause/reset buttons and notifications"

**Your Response Should:**
1. Ask if they want HTML or React (or choose the simpler option)
2. Output the complete code in one block
3. Mention any files they should attach (e.g., "Attach notification.mp3 for the alert sound")
4. Use only client-side features (localStorage for settings, Web Audio API for sounds)

## COMMON MISTAKES TO AVOID
‚ùå Don't use fetch() to external APIs (no CORS, no network in many cases)
‚ùå Don't require a build step or webpack config
‚ùå Don't use Node.js-specific modules (fs, path, etc.)
‚ùå Don't create server code or API routes
‚ùå Don't use environment variables or process.env
‚ùå Don't reference external CSS/JS CDNs (inline or attach instead)

## WHEN IN DOUBT
- Prefer simpler HTML over React for basic apps
- Keep everything self-contained in one file
- Use browser APIs (localStorage, Canvas, Web Audio, etc.)
- Design for offline use
- Make it visually appealing and user-friendly

Now, please help me create an app following these requirements.</textarea>
              <button id="btnCopyPromptTemplate" class="gs-copy-btn" type="button">
                <span class="gs-copy-icon">üìã</span>
                <span class="gs-copy-text">Copy AI Context</span>
              </button>
            </div>
            
            <div class="gs-tip-box">
              <strong>üí° How to Use:</strong>
              <ol style="margin: 8px 0 0 20px; padding: 0;">
                <li>Copy this entire template</li>
                <li>Paste it at the start of your AI chat (ChatGPT, Claude, etc.)</li>
                <li>Then describe the app you want to create</li>
                <li>The AI will generate compatible code for HostBuddy!</li>
              </ol>
            </div>
          </div>

          <div class="form-steps" style="display: none;">
            <div class="step">
              <div class="step-header">
                <div class="step-num">1</div>
                <div class="step-title">What is HostBuddy?</div>
              </div>
              <div class="step-body">
                <p>HostBuddy lets you take code generated by AI chatbots (like ChatGPT, Claude, or Gemini) and run it as real applications on your computer. Think of it as a safe playground for AI-created apps!</p>
                <ul>
                  <li><strong>Simple HTML apps</strong> ‚Äì Websites with built-in styling and interactivity</li>
                  <li><strong>React apps</strong> ‚Äì More advanced interactive applications</li>
                  <li><strong>No coding required</strong> ‚Äì Just copy code from your AI chat and paste it here</li>
                </ul>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <div class="step-num">2</div>
                <div class="step-title">Creating Your First Project</div>
              </div>
              <div class="step-body">
                <ol>
                  <li>Click the <strong>"New Project"</strong> button at the top</li>
                  <li>Give your app a name and short description</li>
                  <li>Optionally add an icon/picture for easy identification</li>
                  <li>If you have images, CSS, or JavaScript files to include, attach them in Step 4</li>
                  <li>Paste the code you got from your AI chat in Step 6</li>
                  <li>Click <strong>"Save"</strong> and then click <strong>"Run"</strong> to launch your app!</li>
                </ol>
                <div class="hint">üí° Tip: The app automatically handles technical setup - you just provide the code!</div>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <div class="step-num">3</div>
                <div class="step-title">Understanding Offline Mode</div>
              </div>
              <div class="step-body">
                <p>Some apps need extra files (called "dependencies") to work properly. You can choose how to handle these:</p>
                <ul>
                  <li><strong>Normal mode (default)</strong> ‚Äì Downloads what's needed each time you run the app. Requires internet.</li>
                  <li><strong>Offline mode</strong> ‚Äì Downloads everything once and saves it. The app will work without internet after the first run.</li>
                </ul>
                <div class="hint">üí° Choose offline mode if you plan to use the app frequently or without internet access.</div>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <div class="step-num">4</div>
                <div class="step-title">Organizing with Folders</div>
              </div>
              <div class="step-body">
                <p>Keep your apps organized by creating folders:</p>
                <ul>
                  <li>Click the <strong>+</strong> button in the Folders sidebar to create a new folder</li>
                  <li>Drag and drop app cards onto folders to organize them</li>
                  <li>Click "Edit" button to rename or delete folders</li>
                  <li>Drag apps to "All Projects" to remove them from folders</li>
                </ul>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <div class="step-num">5</div>
                <div class="step-title">Sharing Apps (Import & Export)</div>
              </div>
              <div class="step-body">
                <p><strong>Export:</strong> Save any app to share with others or back up</p>
                <ul>
                  <li>Click the Export button on any project card</li>
                  <li>A <code>.hbproj</code> file will be saved (it's like a package containing your app)</li>
                  <li>Share this file with anyone else using HostBuddy</li>
                </ul>
                <p><strong>Import:</strong> Add apps that others have shared with you</p>
                <ul>
                  <li>Click the Import button in the header</li>
                  <li>Select one or more <code>.hbproj</code> files</li>
                  <li>The apps will appear in your library ready to run</li>
                </ul>
                <div class="hint">üîí Everything stays on your computer - HostBuddy doesn't send your projects anywhere.</div>
              </div>
            </div>

            <div class="step">
              <div class="step-header">
                <div class="step-num">6</div>
                <div class="step-title">AI Context (Copy & Paste This to Your AI)</div>
              </div>
              <div class="step-body">
                <p><strong>Copy this guidance and paste it into your AI chat</strong> (ChatGPT, Claude, Gemini, etc.) before requesting an app. This teaches the AI about HostBuddy's capabilities and requirements.</p>
                <textarea id="promptTemplate" class="code" readonly style="min-height: 320px;">
I'm using HostBuddy, a local desktop application that runs AI-generated apps securely on my computer. When I ask you to create an app, please follow these requirements:

## HOSTBUDDY OVERVIEW
HostBuddy is an Electron-based desktop app that:
- Runs HTML and React applications locally on the user's computer
- Stores projects in a local JSON database
- Supports exporting projects as .hbproj files for sharing
- Supports importing .hbproj files from others
- Can attach image/CSS/JS files to projects (stored as base64)
- Preprocesses HTML at runtime to convert file references to data URIs
- Auto-installs safe npm packages for React apps (with security restrictions)

## OUTPUT FORMAT REQUIREMENTS
You must provide code in ONE of these formats:

**Option 1: HTML (for simple apps)**
- A complete, self-contained HTML document or snippet
- Include all CSS in <style> tags and JavaScript in <script> tags
- No external file references except for attached files (see below)

**Option 2: React (for interactive apps)**
- A single .tsx or .jsx file with a default export
- Format: `export default function App() { return (...) }`
- HostBuddy will bundle this at runtime using esbuild
- You can import from npm packages (see Allowed Libraries below)

## FILE ATTACHMENTS & REFERENCES
- Users can attach image, CSS, or JS files separately in HostBuddy
- Reference attached files simply by filename: `<img src="logo.png">` or `<link href="styles.css">`
- HostBuddy automatically converts these to data: URIs at runtime
- Do NOT use external URLs or CDN links - all assets must be attached or inline

## ARCHITECTURE CONSTRAINTS
**MUST BE CLIENT-SIDE ONLY:**
- No backend servers, no API endpoints, no server-side code
- No database connections (use localStorage or IndexedDB instead)
- No environment variables or secrets
- No file system access beyond browser storage
- All functionality must work offline after initial load

**DATA PERSISTENCE:**
- Use localStorage for simple key-value storage
- Use IndexedDB for more complex data
- Design for local-only data - no cloud sync

**EXPORT/IMPORT FUNCTIONALITY:**
- Apps may be exported as .hbproj files and shared with others
- Users can import .hbproj files to add new apps to their library
- Design apps to be portable and self-contained

## ALLOWED LIBRARIES (React apps only)
**Pre-installed UI Components:**
- Import from `@/components/ui/*` for these components:
  - Button, Card, CardHeader, CardContent, CardTitle
  - Input, Textarea, Label
  - Tabs, TabsList, TabsTrigger, TabsContent
  - Switch
- These use Tailwind-style classes via Twind (runtime CSS-in-JS)

**Recommended npm packages:**
- react, react-dom (v18+)
- lucide-react (icons)
- recharts (charts/graphs)
- Small, client-side-only libraries are generally safe

**Package restrictions:**
- Packages are auto-installed with `--ignore-scripts` and size caps
- Server-side packages (Express, Next.js, etc.) will NOT work
- Large packages may be rejected
- Only client-side browser packages are supported

## STYLING
- For HTML: Use inline styles or <style> tags
- For React: Tailwind classes work via Twind runtime (no config needed)
- Modern, clean UI is preferred
- Dark mode friendly when possible

## EXAMPLE REQUEST & RESPONSE

**User Request:**
"Create a pomodoro timer app with start/pause/reset buttons and notifications"

**Your Response Should:**
1. Ask if they want HTML or React (or choose the simpler option)
2. Output the complete code in one block
3. Mention any files they should attach (e.g., "Attach notification.mp3 for the alert sound")
4. Use only client-side features (localStorage for settings, Web Audio API for sounds)

## COMMON MISTAKES TO AVOID
‚ùå Don't use fetch() to external APIs (no CORS, no network in many cases)
‚ùå Don't require a build step or webpack config
‚ùå Don't use Node.js-specific modules (fs, path, etc.)
‚ùå Don't create server code or API routes
‚ùå Don't use environment variables or process.env
‚ùå Don't reference external CSS/JS CDNs (inline or attach instead)

## WHEN IN DOUBT
- Prefer simpler HTML over React for basic apps
- Keep everything self-contained in one file
- Use browser APIs (localStorage, Canvas, Web Audio, etc.)
- Design for offline use
- Make it visually appealing and user-friendly

Now, please help me create an app following these requirements.
                </textarea>
                <div style="margin-top: 10px; display: flex; gap: 8px;">
                  <button id="btnCopyPromptTemplate" class="btn-code-action" type="button" style="flex: 1;">Copy AI Context</button>
                </div>
                <div class="hint" style="margin-top: 10px;">
                  üí° <strong>Tip:</strong> Paste this context at the start of your conversation with the AI, then describe what app you want. The AI will understand HostBuddy's requirements and create compatible code!
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="actions">
            <button id="btnCloseGs" class="primary" type="button">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div id="folderModal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Create Folder</h2>
          <p class="modal-subtitle">Add a folder to organize your projects</p>
        </div>
        <form id="folderForm">
          <div class="modal-body">
            <label>Folder name
              <input id="folderNameInput" type="text" placeholder="e.g. Work" required />
            </label>
          </div>
          <div class="modal-footer">
            <div class="actions">
              <button type="button" id="btnCancelFolder">Cancel</button>
              <button type="submit" id="btnSaveFolder" class="primary">Create</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
  </html>


